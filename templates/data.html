<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <title>Reddit Data Table</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.1/Chart.bundle.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<div>
    <h1 align="center">Reddit Data Table</h1><a href="/index"><button style="height:75px;width:150px">ðŸ”™ </button></a>
</div>

<body>
    <div class="flex">
        <canvas id='canvas' width="1000" height="500"></canvas>
        <canvas id='canvas2' width="1000" height="500"></canvas>
    </div>


    <!-- <div class="flex">

        <canvas id='canvas3' width="1000" height="500"></canvas>
        <canvas id='canvas4' width="1000" height="500"></canvas> -->

        <script>
            const xyvalues = {{labels | tojson}};
            const entries = Object.entries(xyvalues)
            Object.entries(xyvalues).forEach(([key, value]) => {
                console.log(`${key}: ${value}`)
            })
            
            // const subredditarray = [] 
            // console.log(subredditarray);
            console.log(Object.entries(xyvalues));
            console.log(xyvalues[0][1]);
            var num_comments = [];
            var id = [];
            var created_utc = [];
            var score = [];

            for (i = 0; i < 10; i++) {
                num_comments.push(xyvalues[i][3]);
                id.push(xyvalues[i][0]);
                score.push(xyvalues[i][2]);
                created_utc.push(xyvalues[i][4]);
            }
            console.log(num_comments);
            console.log(id);

            var config1 = {
                type: 'bar',
                data: {
                    labels: id,
                    datasets: [{
                        label: "Most Popular Posts",
                        data: num_comments,
                        fill: false,
                        backgroundColor: "#5c8cf2 ",
                        borderColor: "#eebcde",
                        borderCapStyle: 'butt',
                        borderDash: [5, 5],
                    }]
                },
                options: {
                    responsive: false,
                    legend: {
                        position: 'bottom',
                    },
                    hover: {
                        mode: 'label'
                    },
                    scales: {
                        xAxes: [{
                            display: true,
                            scaleLabel: {
                                display: true,
                                labelString: 'Reddit Post Ids'
                            }
                        }],
                        yAxes: [{
                            display: true,
                            ticks: {
                                beginAtZero: true,
                                steps: 20,
                                stepValue: 1000,
                                max: 20000
                            }
                        }]
                    },
                    title: {
                        display: true,
                        text: 'Most Popular Posts'
                    }
                }
            };


            var config2 = {
                type: 'line',
                data: {
                    labels: created_utc,
                    datasets: [{
                        label: "Most Popular Post Times",
                        data: score,
                        fill: false,
                        backgroundColor: "#5c8cf2 ",
                        borderColor: "#5c8cf2",
                        borderCapStyle: 'butt',
                        borderDash: [5, 5],
                    }]
                },
                options: {
                    responsive: false,
                    legend: {
                        position: 'bottom',
                    },
                    hover: {
                        mode: 'label'
                    },
                    scales: {
                        xAxes: [{
                            display: true,
                            scaleLabel: {
                                display: true,
                                labelString: 'Post Created -- (in UTC)'
                            }
                        }],
                        yAxes: [{
                            display: true,
                            ticks: {
                                beginAtZero: true,
                                steps: 30,
                                stepValue: 1000,
                                max: 50000
                            }
                        }]
                    },
                    title: {
                        display: true,
                        text: 'Most Popular Times for Posts'
                    }
                }
            };

            // var config3 = {
            //     type: 'radar',
            //     data: {
            //         labels: ["January", "February", "March", "April", "May", "June", "July"],
            //         datasets: [{
            //             label: "My First dataset",
            //             data: [10, 80, 56, 60, 6, 45, 15],
            //             fill: false,
            //             backgroundColor: "#eebcde ",
            //             borderColor: "#eebcde",
            //             borderCapStyle: 'butt',
            //             borderDash: [5, 5],
            //         }]
            //     },
            //     options: {
            //         responsive: false,
            //         legend: {
            //             position: 'bottom',
            //         },
            //         hover: {
            //             mode: 'label'
            //         },
            //         scales: {
            //             xAxes: [{
            //                 display: true,
            //                 scaleLabel: {
            //                     display: true,
            //                     labelString: 'Month'
            //                 }
            //             }],
            //             yAxes: [{
            //                 display: true,
            //                 ticks: {
            //                     beginAtZero: true,
            //                     steps: 10,
            //                     stepValue: 5,
            //                     max: 100
            //                 }
            //             }]
            //         },
            //         title: {
            //             display: true,
            //             text: 'Chart.js Line Chart - Legend'
            //         }
            //     }
            // };

            // var config4 = {
            //     type: 'pie',
            //     data: {
            //         labels: ["January", "February", "March", "April", "May", "June", "July"],
            //         datasets: [{
            //             label: "My First dataset",
            //             data: [10, 80, 56, 60, 6, 45, 15],
            //             fill: false,
            //             backgroundColor: "#eebcde ",
            //             borderColor: "#eebcde",
            //             borderCapStyle: 'butt',
            //             borderDash: [5, 5],
            //         }]
            //     },
            //     options: {
            //         responsive: false,
            //         legend: {
            //             position: 'bottom',
            //         },
            //         hover: {
            //             mode: 'label'
            //         },
            //         scales: {
            //             xAxes: [{
            //                 display: true,
            //                 scaleLabel: {
            //                     display: true,
            //                     labelString: 'Month'
            //                 }
            //             }],
            //             yAxes: [{
            //                 display: true,
            //                 ticks: {
            //                     beginAtZero: true,
            //                     steps: 10,
            //                     stepValue: 5,
            //                     max: 100
            //                 }
            //             }]
            //         },
            //         title: {
            //             display: true,
            //             text: 'Chart.js Line Chart - Legend'
            //         }
            //     }
            // };

            var ctx = document.getElementById("canvas").getContext("2d");
            var ctx2 = document.getElementById("canvas2").getContext("2d");
            // var ctx3 = document.getElementById("canvas3").getContext("2d");
            // var ctx4 = document.getElementById("canvas4").getContext("2d");
            new Chart(ctx, config1);
            new Chart(ctx2, config2);
            // new Chart(ctx3, config3);
            // new Chart(ctx4, config4);
            console.log(config1.data);
            console.log(config1.data1);
            console.log(config1.labels);


            // window.onload = function(){
            //     var ctx = document.getElementById("myLineChart").getContext("2d");
            //     window.myLine = new Chart(ctx).Line(lineChartData, {
            //         scaleOverride : true,
            //         scaleSteps : 10,
            //         scaleStepWidth : 50,
            //         scaleStartValue : 0
            //     });
            // }

            //     let lineChart = document.getElementById('myLineChart').getContext('2d');
            //     let myLineChart = new Chart(lineChart, {
            //         type: 'line',
            //         data:{
            //             labels: [
            //             'Apple', 'Oranges', 'Grapes'
            //             ],
            //             datasets: [{
            //                 label: 'My First dataset',
            //                 data: [10,80,56],
            //                 fill: false,
            //                 backgroundColor: "#eebcde ",
            //                 borderColor: "#eebcde",
            //                 borderCapStyle: 'butt',
            //                 borderDash: [5, 5],
            //             }]
            // },
            // options:{
            //             title:{
            //               display:true,
            //               text:'Balance',
            //               fontSize:25
            //             },
            //             legend:{
            //               display:true,
            //               position:'right',
            //               labels:{
            //                 fontColor:'#000'
            //               }
            //             },
            //             layout:{
            //               padding:{
            //                 left:50,
            //                 right:0,
            //                 bottom:0,
            //                 top:0
            //               }
            //             },
            //             tooltips:{
            //               enabled:true
            //             }
            //           }
            //         });




            // var data = {
            // labels: ["January", "February", "March"],
            // datasets: [
            // {
            // label: "Temperature 2013",
            // data: [8, 11, 18]
            // },
            // ]
            // };

            // var ctx = document.getElementById("myLineChart").getContext("2d");
        </script>
    </div>
    <style>
        td {
            width: 300px;
            text-align: center;
            border: 1px solid black;
            padding: 5px;
        }
    </style>
    <table>
        <thead>
            <tr>
                <th>Post ID</th>
                <th>Title </th>
                <th>Total Score</th>
                <th>Number of Comments</th>
                <th>Created Date</th>
                <th>URL Text</th>
            </tr>
        </thead>
        <tbody>
            {% for row in data1 %}
            <tr>
                <td>{{row[0]}}</td>
                <td>{{row[1]}}</td>
                <td>{{row[2]}}</td>
                <td>{{row[3]}}</td>
                <td>{{row[4]}}</td>
                <td>{{row[5]}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div>
        <!-- <canvas id="line_chart", width="900", height="600"></canvas>
<script>
    var ctx = document.getElementById("line_chart").getContext("2d");
    var line_chart = new Chart(ctx, {
        type: "line",
        data: {
            labels: {{labels | safe}}
            datasets: [
            {
              label: "Data points",
              data {{ values | safe }},
              fill: false,
              borderColor: "rgb(75, 192, 192)",
              lineTension: 0.1
        
            }]
            
    },
    options: {
        responseive: true
    }
}); -->
    </div>

</body>

</html>